<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <link rel="stylesheet" href="./css/GithubSearch.css">
    </head>
    <script>
        function fixFields() {
        //   debugger;
          let _extensions = document.getElementById("extension");
          let form = document.forms["mySearchForm"];
          form.removeChild(_extensions);
          let extensions = _extensions.value.split(/[ ,\t\n]/).filter(Boolean);
          let qext = "";
          for(let extension of extensions) {
             qext += (" extension:" + extension);
          }
          let search = document.getElementById("search");
          let query = document.getElementById("q");
          query.value = search.value + " org:smartcontractkit " + qext;
          search.value = "";
          console.log("search value = ", query.value);
          return true;  
        }

        function doSubmit() {
          fixFields();  
          let form = document.forms["mySearchForm"];
          form.submit();  
        }

        function clearSearch() {
            let search = document.getElementById("search");
            search.value = "";
        }
    </script>
<body >
    <p>
        Github Search by Chee-Wee Chua &copy 2022.
    </p>
    <div class="center">

        <form id="mySearchForm" action="https://github.com/search?" method="GET" >
            <input id="q" name="q" type="text" hidden size="80"><br><br>
            <label for="search">Search:</label>
            <input id="search" name="search" type="text" size="80"><br><br>
            <label for="extension">Extensions:</label><br><br>
            <textarea id="extension" name="extension" 
              cols="40" rows="5" style="text-align: left">
                asm
                c
                conf
                config
                cpp
                cs
                go
                h
                hpp
                htm
                html
                java
                js
                json
                jsx
                pas
                php
                toml
                ts
                tsx
                vb
                vbs
                yml
            </textarea><br><br>
            <input type="text" id="type" name="type" hidden value="code">
            <input type="button" value="Submit" onclick="doSubmit()">
        </form>
    </div> 
</body>    
</html>
